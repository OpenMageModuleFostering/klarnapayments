<?xml version="1.0"?>
<!--
/*
 * Copyright (c) 2009-2014 Vaimo AB
 *
 * Vaimo reserves all rights in the Program as delivered. The Program
 * or any portion thereof may not be reproduced in any form whatsoever without
 * the written consent of Vaimo, except as provided by licence. A licence
 * under Vaimo's rights in the Program may be available directly from
 * Vaimo.
 *
 * Disclaimer:
 * THIS NOTICE MAY NOT BE REMOVED FROM THE PROGRAM BY ANY USER THEREOF.
 * THE PROGRAM IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
 * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE PROGRAM OR THE USE OR OTHER DEALINGS
 * IN THE PROGRAM.
 *
 * @category    Vaimo
 * @package     Vaimo_Klarna
 * @copyright   Copyright (c) 2009-2014 Vaimo AB
 */
-->

<layout version="0.1.0">
    <default>
        <reference name="head">
            <action method="addCss"><stylesheet>css/vaimo/klarna/global.css</stylesheet></action>
        </reference>
        <reference name="right">
            <block type="klarna/page_html_logo" name="klarna_promotion_logo" template="vaimo/klarna/page/html/logo.phtml"/>
        </reference>
    </default>
    <!--
    <cms_index_index>
        <reference name="right">
            <block type="klarna/page_html_logo" name="klarna_promotion_logo" template="vaimo/klarna/page/html/logo.phtml"/>
        </reference>
        <reference name="left">
            <block type="klarna/page_html_logo" name="klarna_promotion_logo" template="vaimo/klarna/page/html/logo.phtml"/>
        </reference>
        <reference name="footer">
            <block type="klarna/page_html_logo" name="klarna_promotion_logo" template="vaimo/klarna/page/html/logo.phtml"/>
        </reference>
    </cms_index_index>
    -->
    <catalog_product_view>
        <reference name="head">
            <block type="core/text" name="klarna_widget_js">
                <action method="setText"><text><![CDATA[<script async src="https://cdn.klarna.com/1.0/code/client/all.js"></script>]]></text></action>
            </block>
        </reference>
        <reference name="product.info.extrahint">
            <block type="klarna/catalog_product_pricewidget" template="vaimo/klarna/catalog/product/pricewidget.phtml" name="klarna_price_widget" />
        </reference>
    </catalog_product_view>
    <checkout_onepage_index>
        <reference name="head">
            <action method="addJs"><script>vaimo/klarna/klarna.js</script></action>
            <action method="addCss"><stylesheet>css/vaimo/klarna/checkout.css</stylesheet></action>
            <block type="page/html_head" name="klarna_header" as="klarna_header" template="vaimo/klarna/checkout/header.phtml" />
        </reference>
        <reference name="content">
            <block type="klarna/checkout_top" after="-" name="klarna_checkout_top" as="klarna_checkout_top" template="vaimo/klarna/checkout/top.phtml" />
        </reference>
    </checkout_onepage_index>

    <onestepcheckout_index_index>
        <reference name="head">
            <action method="addJs"><script>vaimo/klarna/klarna.js</script></action>
            <action method="addCss"><stylesheet>css/vaimo/klarna/checkout_osc.css</stylesheet></action>
            <block type="page/html_head" name="klarna_header" as="klarna_header" template="vaimo/klarna/checkout/header.phtml" />
        </reference>
        <reference name="content">
            <block type="klarna/checkout_top" after="-" name="klarna_checkout_top" as="klarna_checkout_top" template="vaimo/klarna/checkout/top.phtml" />
        </reference>
    </onestepcheckout_index_index>

    <catalog_product_view>
        <reference name="head">
            <action method="addCss"><stylesheet>css/vaimo/klarna/product.css</stylesheet></action>
        </reference>
    </catalog_product_view>

    <sales_order_print>
        <reference name="order_totals">
            <block name="vaimo_totals" type="klarna/order_totals" before="tax"/>
        </reference>
    </sales_order_print>

    <sales_order_view>
        <reference name="order_totals">
            <block name="vaimo_totals" type="klarna/order_totals" before="tax"/>
        </reference>
    </sales_order_view>

    <sales_order_invoice>
        <reference name="invoice_totals">
            <block name="vaimo_totals" type="klarna/invoice_totals" before="tax"/>
        </reference>
    </sales_order_invoice>

    <sales_order_printinvoice>
        <reference name="invoice_totals">
            <block name="vaimo_totals" type="klarna/invoice_totals" before="tax"/>
        </reference>
    </sales_order_printinvoice>

    <sales_email_order_items>
        <reference name="order_totals">
            <block name="vaimo_totals" type="klarna/order_totals" before="tax"/>
        </reference>
    </sales_email_order_items>

    <sales_email_order_invoice_items>
        <reference name="invoice_totals">
            <block name="vaimo_totals" type="klarna/invoice_totals" before="tax"/>
        </reference>
    </sales_email_order_invoice_items>
</layout>
